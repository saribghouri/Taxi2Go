{
  "info": {
    "name": "Taxi2Go Backend API - V2",
    "description": "Complete API collection for testing Taxi2Go V2 backend endpoints with vehicle-based pricing",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "2.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Health Check",
      "request": {
        "auth": {
          "type": "noauth"
        },
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": ["{{baseUrl}}"],
          "path": ["health"]
        }
      }
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.token) {",
                  "        pm.environment.set('authToken', response.token);",
                  "        console.log('Token saved:', response.token);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@taxi2go.com\",\n  \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "me"]
            }
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "logout"]
            }
          }
        }
      ]
    },
    {
      "name": "Fare",
      "item": [
        {
          "name": "Calculate Fare - All Vehicles (Daytime)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.vehicles && response.data.vehicles.length > 0) {",
                  "        const firstVehicle = response.data.vehicles[0];",
                  "        pm.environment.set('vehicleId', firstVehicle.vehicleId);",
                  "        pm.environment.set('vehicleName', firstVehicle.vehicleName);",
                  "        console.log('Saved vehicleId:', firstVehicle.vehicleId);",
                  "        console.log('Saved vehicleName:', firstVehicle.vehicleName);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pickup\": \"Sydney Airport, NSW, Australia\",\n  \"dropoff\": \"Circular Quay, Sydney NSW, Australia\",\n  \"pickupTime\": \"2026-01-30T14:00:00.000Z\",\n  \"childSeat\": true,\n  \"wheelchair\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/fare/calculate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "fare", "calculate"]
            }
          }
        },
        {
          "name": "Calculate Fare - All Vehicles (Nighttime)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pickup\": \"Sydney Airport, NSW, Australia\",\n  \"dropoff\": \"Circular Quay, Sydney NSW, Australia\",\n  \"pickupTime\": \"2026-01-30T23:30:00.000Z\",\n  \"childSeat\": false,\n  \"wheelchair\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/fare/calculate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "fare", "calculate"]
            }
          }
        },
        {
          "name": "Calculate Fare - Long Distance (50+ KM)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pickup\": \"Sydney CBD, NSW, Australia\",\n  \"dropoff\": \"Wollongong, NSW, Australia\",\n  \"pickupTime\": \"2026-01-30T10:00:00.000Z\",\n  \"childSeat\": false,\n  \"wheelchair\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/fare/calculate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "fare", "calculate"]
            }
          }
        }
      ]
    },
    {
      "name": "Booking",
      "item": [
        {
          "name": "Create Booking (Card Payment)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pickup\": \"Sydney Airport, NSW, Australia\",\n  \"pickupLat\": -33.9461,\n  \"pickupLng\": 151.1772,\n  \"dropoff\": \"Circular Quay, Sydney NSW, Australia\",\n  \"dropoffLat\": -33.8614,\n  \"dropoffLng\": 151.2108,\n  \"pickupTime\": \"2026-01-30T10:00:00.000Z\",\n  \"vehicleId\": \"{{vehicleId}}\",\n  \"vehicleType\": \"{{vehicleName}}\",\n  \"childSeat\": false,\n  \"wheelchair\": false,\n  \"specialRequirements\": \"Please call upon arrival\",\n  \"passengerName\": \"John Doe\",\n  \"passengerPhone\": \"+61412345678\",\n  \"passengerEmail\": \"john.doe@example.com\",\n  \"paymentMethod\": \"card\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/booking/create",
              "host": ["{{baseUrl}}"],
              "path": ["api", "booking", "create"]
            }
          }
        },
        {
          "name": "Create Booking (Cash Payment)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.bookingId) {",
                  "        pm.environment.set('bookingId', response.data.bookingId);",
                  "        console.log('Booking ID saved:', response.data.bookingId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pickup\": \"Bondi Beach, Sydney NSW\",\n  \"pickupLat\": -33.8915,\n  \"pickupLng\": 151.2767,\n  \"dropoff\": \"Sydney Opera House, Sydney NSW\",\n  \"dropoffLat\": -33.8568,\n  \"dropoffLng\": 151.2153,\n  \"pickupTime\": \"2026-01-30T14:00:00.000Z\",\n  \"vehicleId\": \"{{vehicleId}}\",\n  \"vehicleType\": \"{{vehicleName}}\",\n  \"childSeat\": true,\n  \"wheelchair\": false,\n  \"passengerName\": \"Jane Smith\",\n  \"passengerPhone\": \"+61423456789\",\n  \"passengerEmail\": \"jane.smith@example.com\",\n  \"paymentMethod\": \"cash\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/booking/create",
              "host": ["{{baseUrl}}"],
              "path": ["api", "booking", "create"]
            }
          }
        },
        {
          "name": "Create Booking (Cabcharge Payment)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pickup\": \"Darling Harbour, Sydney NSW\",\n  \"pickupLat\": -33.8731,\n  \"pickupLng\": 151.1989,\n  \"dropoff\": \"Sydney Airport, NSW, Australia\",\n  \"dropoffLat\": -33.9461,\n  \"dropoffLng\": 151.1772,\n  \"pickupTime\": \"2026-01-30T16:00:00.000Z\",\n  \"vehicleId\": \"{{vehicleId}}\",\n  \"vehicleType\": \"{{vehicleName}}\",\n  \"childSeat\": false,\n  \"wheelchair\": true,\n  \"passengerName\": \"Bob Johnson\",\n  \"passengerPhone\": \"+61434567890\",\n  \"passengerEmail\": \"bob.johnson@example.com\",\n  \"paymentMethod\": \"cabcharge\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/booking/create",
              "host": ["{{baseUrl}}"],
              "path": ["api", "booking", "create"]
            }
          }
        },
        {
          "name": "Create Booking (TTSS Payment)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pickup\": \"Central Station, Sydney NSW\",\n  \"pickupLat\": -33.8833,\n  \"pickupLng\": 151.2065,\n  \"dropoff\": \"University of Sydney, NSW\",\n  \"dropoffLat\": -33.8886,\n  \"dropoffLng\": 151.1873,\n  \"pickupTime\": \"2026-01-30T08:30:00.000Z\",\n  \"vehicleId\": \"{{vehicleId}}\",\n  \"vehicleType\": \"{{vehicleName}}\",\n  \"childSeat\": false,\n  \"wheelchair\": false,\n  \"passengerName\": \"Alice Brown\",\n  \"passengerPhone\": \"+61445678901\",\n  \"passengerEmail\": \"alice.brown@example.com\",\n  \"paymentMethod\": \"ttss\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/booking/create",
              "host": ["{{baseUrl}}"],
              "path": ["api", "booking", "create"]
            }
          }
        },
        {
          "name": "Verify OTP",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"bookingId\": \"{{bookingId}}\",\n  \"otp\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/booking/verify-otp",
              "host": ["{{baseUrl}}"],
              "path": ["api", "booking", "verify-otp"]
            }
          }
        },
        {
          "name": "Resend OTP",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"bookingId\": \"{{bookingId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/booking/resend-otp",
              "host": ["{{baseUrl}}"],
              "path": ["api", "booking", "resend-otp"]
            }
          }
        },
        {
          "name": "Cancel Booking",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/booking/cancel/:bookingId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "booking", "cancel", ":bookingId"],
              "variable": [
                {
                  "key": "bookingId",
                  "value": "{{bookingId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get Booking by ID",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/booking/:bookingId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "booking", ":bookingId"],
              "variable": [
                {
                  "key": "bookingId",
                  "value": "{{bookingId}}",
                  "description": "The booking ID from success page URL"
                }
              ]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"_id\": \"697b9e57bef585b109218291\",\n    \"pickupAddress\": \"Sydney CBD, NSW\",\n    \"dropoffAddress\": \"Bondi Beach, Sydney NSW\",\n    \"pickupTime\": \"2026-01-30T10:00:00.000Z\",\n    \"totalFare\": 45.50,\n    \"vehicleType\": \"Sedan\",\n    \"paymentMethod\": \"card\",\n    \"paymentStatus\": \"Paid\",\n    \"bookingStatus\": \"Confirmed\",\n    \"childSeat\": false,\n    \"wheelchair\": false,\n    \"specialRequirements\": null,\n    \"passengerId\": {\n      \"_id\": \"...\",\n      \"fullName\": \"John Doe\",\n      \"email\": \"john@example.com\",\n      \"phone\": \"+61412345678\"\n    },\n    \"createdAt\": \"2026-01-29T08:30:00.000Z\"\n  }\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Vehicle Management",
      "item": [
        {
          "name": "Get All Vehicles for Company",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies/{{companyId}}/vehicles",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies", "{{companyId}}", "vehicles"]
            }
          }
        },
        {
          "name": "Get Vehicle by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies/{{companyId}}/vehicles/:vehicleId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies", "{{companyId}}", "vehicles", ":vehicleId"],
              "variable": [
                {
                  "key": "vehicleId",
                  "value": "{{vehicleId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Create Vehicle",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Premium Sedan\",\n  \"passengerCapacity\": 4,\n  \"luggageCapacity\": 3,\n  \"status\": \"active\",\n  \"baseFare\": 55.00,\n  \"baseDistance\": 10,\n  \"dayPricePerKm\": 3.00,\n  \"nightPricePerKm\": 3.75,\n  \"nightStartTime\": \"22:00\",\n  \"nightEndTime\": \"06:00\",\n  \"longDistanceThreshold\": 50,\n  \"longDistancePricePerKm\": 2.20,\n  \"minimumFare\": 35.00,\n  \"airportSurcharge\": 5.00,\n  \"enableTollFees\": true,\n  \"childSeatPrice\": 10.00,\n  \"wheelchairPrice\": 15.00\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies/{{companyId}}/vehicles",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies", "{{companyId}}", "vehicles"]
            }
          }
        },
        {
          "name": "Update Vehicle",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Premium Sedan Updated\",\n  \"passengerCapacity\": 4,\n  \"luggageCapacity\": 3,\n  \"status\": \"active\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies/{{companyId}}/vehicles/:vehicleId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies", "{{companyId}}", "vehicles", ":vehicleId"],
              "variable": [
                {
                  "key": "vehicleId",
                  "value": "{{vehicleId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Update Vehicle Pricing",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"baseFare\": 60.00,\n  \"dayPricePerKm\": 3.20,\n  \"nightPricePerKm\": 4.00,\n  \"minimumFare\": 40.00,\n  \"airportSurcharge\": 6.00\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies/{{companyId}}/vehicles/:vehicleId/pricing",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies", "{{companyId}}", "vehicles", ":vehicleId", "pricing"],
              "variable": [
                {
                  "key": "vehicleId",
                  "value": "{{vehicleId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Deactivate Vehicle (Soft Delete)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies/{{companyId}}/vehicles/:vehicleId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies", "{{companyId}}", "vehicles", ":vehicleId"],
              "variable": [
                {
                  "key": "vehicleId",
                  "value": "{{vehicleId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Delete Vehicle Permanently",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies/{{companyId}}/vehicles/:vehicleId?hardDelete=true",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies", "{{companyId}}", "vehicles", ":vehicleId"],
              "query": [
                {
                  "key": "hardDelete",
                  "value": "true"
                }
              ],
              "variable": [
                {
                  "key": "vehicleId",
                  "value": "{{vehicleId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Activate Vehicle",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies/{{companyId}}/vehicles/:vehicleId/activate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies", "{{companyId}}", "vehicles", ":vehicleId", "activate"],
              "variable": [
                {
                  "key": "vehicleId",
                  "value": "{{vehicleId}}"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Admin",
      "item": [
        {
          "name": "Get All Companies",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.length > 0) {",
                  "        const firstCompany = response.data[0];",
                  "        pm.environment.set('companyId', firstCompany._id);",
                  "        console.log('Company ID saved:', firstCompany._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies"]
            }
          }
        },
        {
          "name": "Get Company Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies/:companyId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies", ":companyId"],
              "variable": [
                {
                  "key": "companyId",
                  "value": "replace-with-company-id"
                }
              ]
            }
          }
        },
        {
          "name": "Get Company Bookings",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies/:companyId/bookings?limit=10&page=1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies", ":companyId", "bookings"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "status",
                  "value": "Confirmed",
                  "disabled": true
                },
                {
                  "key": "paymentStatus",
                  "value": "Paid",
                  "disabled": true
                }
              ],
              "variable": [
                {
                  "key": "companyId",
                  "value": "replace-with-company-id"
                }
              ]
            }
          }
        },
        {
          "name": "Get Company Passengers",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies/:companyId/passengers?limit=10&page=1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies", ":companyId", "passengers"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "page",
                  "value": "1"
                }
              ],
              "variable": [
                {
                  "key": "companyId",
                  "value": "replace-with-company-id"
                }
              ]
            }
          }
        },
        {
          "name": "Get Company Settings",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies/:companyId/settings",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies", ":companyId", "settings"],
              "variable": [
                {
                  "key": "companyId",
                  "value": "{{companyId}}"
                }
              ]
            }
          },
          "response": [
            {
              "name": "Get Company Settings - Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{authToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/companies/:companyId/settings",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "admin", "companies", ":companyId", "settings"],
                  "variable": [
                    {
                      "key": "companyId",
                      "value": "{{companyId}}"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"companyId\": \"60d5ec49f1b2c8b1f8e4e1a1\",\n    \"name\": \"Taxi2Go\",\n    \"email\": \"admin@taxi2go.com\",\n    \"phone\": \"+61400000000\",\n    \"address\": \"Sydney, NSW, Australia\",\n    \"logo\": \"https://example.com/logo.png\",\n    \"isActive\": true\n  }\n}"
            }
          ]
        },
        {
          "name": "Update Company Settings",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Taxi2Go Premium\",\n  \"email\": \"contact@taxi2go.com\",\n  \"phone\": \"+61400111222\",\n  \"address\": \"123 Main St, Sydney NSW\",\n  \"logo\": \"https://example.com/new-logo.png\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/admin/companies/:companyId/settings",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "companies", ":companyId", "settings"],
              "variable": [
                {
                  "key": "companyId",
                  "value": "{{companyId}}"
                }
              ]
            }
          },
          "response": [
            {
              "name": "Update Company Settings - Success",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{authToken}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Taxi2Go Premium\",\n  \"email\": \"contact@taxi2go.com\",\n  \"phone\": \"+61400111222\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/admin/companies/:companyId/settings",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "admin", "companies", ":companyId", "settings"],
                  "variable": [
                    {
                      "key": "companyId",
                      "value": "{{companyId}}"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"companyId\": \"60d5ec49f1b2c8b1f8e4e1a1\",\n    \"name\": \"Taxi2Go Premium\",\n    \"email\": \"contact@taxi2go.com\",\n    \"phone\": \"+61400111222\",\n    \"address\": \"123 Main St, Sydney NSW\",\n    \"logo\": \"https://example.com/new-logo.png\",\n    \"isActive\": true\n  },\n  \"message\": \"Settings updated successfully\"\n}"
            }
          ]
        },
        {
          "name": "Get All Bookings",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/bookings?limit=10&page=1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "bookings"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "status",
                  "value": "Confirmed",
                  "disabled": true
                },
                {
                  "key": "paymentStatus",
                  "value": "Paid",
                  "disabled": true
                }
              ]
            }
          }
        },
        {
          "name": "Get Booking by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/bookings/:bookingId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "bookings", ":bookingId"],
              "variable": [
                {
                  "key": "bookingId",
                  "value": "replace-with-actual-booking-id"
                }
              ]
            }
          }
        },
        {
          "name": "Get Settings (Legacy - Default Company)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/settings",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "settings"]
            }
          },
          "response": [
            {
              "name": "Get Settings - Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{authToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/settings",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "admin", "settings"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"companyId\": \"60d5ec49f1b2c8b1f8e4e1a1\",\n    \"name\": \"Taxi2Go\",\n    \"email\": \"admin@taxi2go.com\",\n    \"phone\": \"+61400000000\",\n    \"address\": \"Sydney, NSW, Australia\",\n    \"logo\": null,\n    \"isActive\": true\n  }\n}"
            }
          ]
        },
        {
          "name": "Update Settings (Legacy - Default Company)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Taxi2Go\",\n  \"email\": \"admin@taxi2go.com\",\n  \"phone\": \"+61400000000\",\n  \"address\": \"Sydney, NSW, Australia\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/admin/settings",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "settings"]
            }
          },
          "response": [
            {
              "name": "Update Settings - Success",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{authToken}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Taxi2Go\",\n  \"phone\": \"+61400000000\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/admin/settings",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "admin", "settings"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"companyId\": \"60d5ec49f1b2c8b1f8e4e1a1\",\n    \"name\": \"Taxi2Go\",\n    \"email\": \"admin@taxi2go.com\",\n    \"phone\": \"+61400000000\",\n    \"address\": \"Sydney, NSW, Australia\",\n    \"logo\": null,\n    \"isActive\": true\n  },\n  \"message\": \"Settings updated successfully\"\n}"
            }
          ]
        },
        {
          "name": "Get Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/stats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "stats"]
            }
          }
        },
        {
          "name": "Update Booking Status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"Completed\",\n  \"reason\": \"Booking completed successfully\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/admin/bookings/:bookingId/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "bookings", ":bookingId", "status"],
              "variable": [
                {
                  "key": "bookingId",
                  "value": "",
                  "description": "The ID of the booking to update"
                }
              ]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": true,\n  \"message\": \"Booking status updated from Pending to Completed\",\n  \"data\": {\n    \"bookingId\": \"60d5ec49f1b2c8b1f8e4e1a1\",\n    \"previousStatus\": \"Pending\",\n    \"newStatus\": \"Completed\",\n    \"updatedAt\": \"2024-01-15T10:00:00.000Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Get OTP Logs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/otp-logs?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "otp-logs"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number for pagination"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Number of items per page"
                },
                {
                  "key": "status",
                  "value": "",
                  "disabled": true,
                  "description": "Filter by status (sent, verified, failed, expired)"
                },
                {
                  "key": "phoneNumber",
                  "value": "",
                  "disabled": true,
                  "description": "Filter by phone number (partial match)"
                },
                {
                  "key": "startDate",
                  "value": "",
                  "disabled": true,
                  "description": "Start date filter (ISO format)"
                },
                {
                  "key": "endDate",
                  "value": "",
                  "disabled": true,
                  "description": "End date filter (ISO format)"
                }
              ]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"logs\": [\n      {\n        \"_id\": \"60d5ec49f1b2c8b1f8e4e1a1\",\n        \"phoneNumber\": \"+61412345678\",\n        \"otpCode\": \"123456\",\n        \"bookingId\": {\n          \"_id\": \"60d5ec49f1b2c8b1f8e4e1a2\",\n          \"pickupAddress\": \"Sydney CBD\",\n          \"dropoffAddress\": \"Bondi Beach\",\n          \"totalFare\": 45.50\n        },\n        \"status\": \"verified\",\n        \"attempts\": 1,\n        \"sentAt\": \"2024-01-15T10:00:00.000Z\",\n        \"verifiedAt\": \"2024-01-15T10:01:30.000Z\"\n      }\n    ],\n    \"pagination\": {\n      \"currentPage\": 1,\n      \"totalPages\": 5,\n      \"totalItems\": 100,\n      \"itemsPerPage\": 20\n    },\n    \"summary\": {\n      \"totalSent\": 150,\n      \"totalVerified\": 120,\n      \"totalFailed\": 10,\n      \"totalExpired\": 20,\n      \"verificationRate\": \"80.00%\"\n    }\n  }\n}"
            }
          ]
        },
        {
          "name": "Export Bookings CSV",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/export/bookings",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "export", "bookings"],
              "query": [
                {
                  "key": "startDate",
                  "value": "",
                  "disabled": true,
                  "description": "Start date filter (ISO format)"
                },
                {
                  "key": "endDate",
                  "value": "",
                  "disabled": true,
                  "description": "End date filter (ISO format)"
                },
                {
                  "key": "status",
                  "value": "",
                  "disabled": true,
                  "description": "Filter by booking status"
                },
                {
                  "key": "paymentMethod",
                  "value": "",
                  "disabled": true,
                  "description": "Filter by payment method"
                }
              ]
            }
          }
        },
        {
          "name": "Export Payments CSV",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/export/payments",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "export", "payments"],
              "query": [
                {
                  "key": "startDate",
                  "value": "",
                  "disabled": true,
                  "description": "Start date filter (ISO format)"
                },
                {
                  "key": "endDate",
                  "value": "",
                  "disabled": true,
                  "description": "End date filter (ISO format)"
                },
                {
                  "key": "paymentStatus",
                  "value": "",
                  "disabled": true,
                  "description": "Filter by payment status"
                },
                {
                  "key": "paymentMethod",
                  "value": "",
                  "disabled": true,
                  "description": "Filter by payment method"
                }
              ]
            }
          }
        },
        {
          "name": "Export OTP Logs CSV",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/export/otp-logs",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "export", "otp-logs"],
              "query": [
                {
                  "key": "startDate",
                  "value": "",
                  "disabled": true,
                  "description": "Start date filter (ISO format)"
                },
                {
                  "key": "endDate",
                  "value": "",
                  "disabled": true,
                  "description": "End date filter (ISO format)"
                },
                {
                  "key": "status",
                  "value": "",
                  "disabled": true,
                  "description": "Filter by status (sent, verified, failed, expired)"
                },
                {
                  "key": "phoneNumber",
                  "value": "",
                  "disabled": true,
                  "description": "Filter by phone number"
                }
              ]
            }
          }
        },
        {
          "name": "Get Daily Report",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/reports/daily",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "reports", "daily"]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"period\": \"daily\",\n    \"dateRange\": {\n      \"from\": \"2024-01-15T00:00:00.000Z\",\n      \"to\": \"2024-01-15T23:59:59.000Z\"\n    },\n    \"bookings\": {\n      \"total\": 50,\n      \"confirmed\": 20,\n      \"completed\": 25,\n      \"cancelled\": 3,\n      \"pending\": 2\n    },\n    \"paymentMethods\": {\n      \"card\": 30,\n      \"cash\": 15,\n      \"cabcharge\": 3,\n      \"ttss\": 2\n    },\n    \"revenue\": {\n      \"total\": 2500.00,\n      \"card\": 1500.00,\n      \"cash\": 1000.00,\n      \"breakdown\": {\n        \"tolls\": 75.00,\n        \"airportSurcharges\": 50.00,\n        \"childSeatCharges\": 10.00,\n        \"wheelchairCharges\": 0.00\n      }\n    }\n  }\n}"
            }
          ]
        },
        {
          "name": "Get Weekly Report",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/reports/weekly",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "reports", "weekly"]
            }
          }
        },
        {
          "name": "Get Monthly Report",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/admin/reports/monthly",
              "host": ["{{baseUrl}}"],
              "path": ["api", "admin", "reports", "monthly"]
            }
          }
        }
      ]
    },
    {
      "name": "Test & Verification",
      "item": [
        {
          "name": "Verify Fare Calculation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pickup\": \"Sydney CBD, NSW\",\n  \"dropoff\": \"Bondi Beach, Sydney NSW\",\n  \"pickupTime\": \"2026-01-30T10:00:00.000Z\",\n  \"vehicleId\": \"{{vehicleId}}\",\n  \"childSeat\": false,\n  \"wheelchair\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/test/verify-fare-calculation",
              "host": ["{{baseUrl}}"],
              "path": ["api", "test", "verify-fare-calculation"]
            }
          }
        },
        {
          "name": "Run All Tests",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/test/run-all-tests",
              "host": ["{{baseUrl}}"],
              "path": ["api", "test", "run-all-tests"],
              "query": [
                {
                  "key": "companyId",
                  "value": "",
                  "disabled": true,
                  "description": "Optional: Filter by company ID"
                }
              ]
            }
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000",
      "type": "string"
    }
  ]
}
